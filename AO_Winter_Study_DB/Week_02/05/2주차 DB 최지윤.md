2주차

1. DB (Database)

여러 사람이 공유해 사용할 목적으로 체계화하여 통합 관리하는 데이터의 집합이자 저장소

[DB의 특성]
- 통합된 데이터: 데이터의 중복을 최소화하여 신뢰성 확보
- 저장된 데이터: 컴퓨터 저장 매체에 안전하게 저장되어 언제든 접근 가능
- 공용 데이터: 여러 사용자가 동시에 다양한 목적에 맞게 활용 가능
- 변화하는 데이터: 삽입, 수정, 삭제를 통해 항상 최신 상태 유지


2. IP / Port (주소 개념)

서버가 DB 서버에 접근하기 위해서는 주소 정보가 필요하다.

- IP: 네트워크 상에서 컴퓨터(또는 기기)를 구별하기 위한 고유한 주소
- IP 주소: 인터넷에 연결된 컴퓨터를 식별하는 네트워크 주소
  → DB 서버 컴퓨터의 위치
- Port(포트): 하나의 IP 안에서 실행 중인 여러 프로그램을 구분하기 위한 번호
  → 특정 프로그램(DB)에 접속하기 위한 통로

[동작 흐름]
서버가 IP 주소를 통해 DB 서버 컴퓨터를 찾고,
그 컴퓨터에서 DB 프로그램이 열어둔 Port로 접근한다.


3. TCP / IP

DB 데이터는 유실되면 안 되기 때문에 신뢰성 있는 통신 방식이 필요하다.

- TCP:
  데이터를 주고받을 때 신뢰성(데이터 유실 방지, 순서 보장)을 보장하는 통신 규칙

[3-Way Handshake]
TCP 통신을 시작하기 전, 서로 연결 상태를 확인하는 과정

1) SYN
   클라이언트 → 서버 : 연결 요청
2) SYN + ACK
   서버 → 클라이언트 : 요청 확인 + 응답 준비
3) ACK
   클라이언트 → 서버 : 최종 확인

이 과정이 끝나면 신뢰성 있는 TCP 연결이 성립된다.


4. Socket (소켓)

개념적인 TCP 연결을 실제 프로그램에서 다루기 위한 인터페이스

- 네트워크로 데이터를 보내고 받기 위한 실제 통신 창구
- OS 커널이 관리하는 자원

[기술적 정의]
IP 주소 + Port 번호 + Protocol(TCP)
→ 네트워크 연결의 끝점(Endpoint)

[DB 연결에서의 역할]
- 서버: DB로 연결 요청을 보내는 소켓 생성
- DB: 연결 요청을 대기하는 소켓을 열어두고, 요청 시 전용 소켓 생성
- SQL 요청과 결과는 해당 소켓을 통해 송수신


5. DB Driver

DB와 애플리케이션 사이에서 통신을 중개하는 역할

- 정의:
  서버(Java, Node.js 등)가 DB와 통신할 수 있도록 해주는 드라이버
- 역할:
  IP/Port 연결, TCP Handshake, 인증(ID/PW), Connection 객체 생성
- 특징:
  DB 종류마다 전용 드라이버 필요
  (MySQL Driver, Oracle Driver 등)


6. DB Connection

DB와 애플리케이션이 데이터를 주고받을 수 있는 연결된 상태 자체

[구성 요소]
- TCP 연결 (3-Way Handshake 완료)
- DB 인증 (ID / PW)
- DB 내부 세션(Session) 생성

[연결 과정]
1) 물리적 연결 (TCP Connection)
   서버와 DB 사이에 데이터가 오갈 수 있는 네트워크 길 생성
2) 인증 (Authentication)
   DB 계정 검증
3) 세션 생성 (Session)
   DB가 해당 연결을 위해 메모리 상에 전용 작업 공간 할당

즉,
서버의 메모리 객체(Socket)와
DB의 메모리 공간(Session)이
네트워크를 통해 논리적으로 연결된 상태이다.


7. Session

- 사용자가 DB에 접속하여 작업을 수행하는 동안 유지되는 DB 내부 작업 공간
- 각 Connection마다 하나의 Session이 생성된다.


8. 요청 1번 = 커넥션 1번인가?

상황에 따라 다르다.

[생성 관점]
- 매 요청마다 새로운 Connection을 생성하지 않는다.
- 비용 문제로 인해 Connection Pool을 사용해 재사용한다.

[사용 관점]
- 하나의 요청(Transaction)은 처리되는 동안 커넥션 1개를 독점한다.
- 작업 종료 후 커넥션은 Pool에 반납된다.


9. Transaction

하나의 논리적인 작업 단위

- 여러 SQL 문이 모두 성공하거나
- 하나라도 실패하면 전체 취소(Rollback)

일반적으로 하나의 트랜잭션은 하나의 커넥션에서 수행된다.


10. ACID 원칙

Transaction이 지켜야 할 4가지 특성

- Atomicity (원자성):
  전부 성공하거나 전부 실패
- Consistency (일관성):
  트랜잭션 전후에 데이터 무결성 유지
- Isolation (격리성):
  동시에 실행돼도 서로 간섭하지 않음
- Durability (지속성):
  커밋된 데이터는 시스템 장애 후에도 유지


11. Connection Pool

DB Connection 생성 비용을 줄이기 위해
미리 여러 개의 커넥션을 만들어 관리하는 구조

[동작 방식]
1) 애플리케이션 시작 시 커넥션 미리 생성
2) 요청 시 커넥션 대여
3) SQL 실행
4) 사용 후 Pool에 반납 (연결 종료하지 않음)

[장점]
- 연결 시간 절약으로 응답 속도 향상
- DB 동시 접속 수 제한을 통한 과부하 방지


12. Connection Timeout

- 모든 커넥션이 사용 중일 경우 요청은 대기 상태로 들어감
- 설정된 시간 내에 커넥션을 얻지 못하면 에러 발생

무한 대기를 방지하기 위한 안전장치이다.


13. Latency (지연 시간)

요청(Request)을 보낸 시점부터
응답(Response)을 받을 때까지 걸리는 시간

- 높은 Latency:
  매 요청마다 TCP 연결을 새로 생성
- 낮은 Latency:
  Connection Pool을 통해 이미 열린 연결을 재사용

DB 연결은 단순한 네트워크 연결이 아니라
TCP 연결, 인증, 세션, 트랜잭션을 포함한 고비용 자원이며,
이를 효율적으로 관리하기 위해 Connection Pool을 사용한다.